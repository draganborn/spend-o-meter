<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>spend-o-meter</title>
    <link
      rel="icon"
      href="data:image/png;base64,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"
      type="image/x-icon"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f7fa;
        color: #333;
        transition: background 0.3s, color 0.3s;
      }
      body.dark {
        background-color: #1e1e1e;
        color: #f1f1f1;
      }
      .nav, .footer {
        display: flex;
        justify-content: center;
        background-color: #333;
        padding: 10px;
        text-align: center;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: center;
      }
      .nav div, .footer-container {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
        width: 100%;
        max-width: 760px;
      }
      .nav button, .footer button {
        background-color: #555;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 0 5px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
      }
      .nav button.active,
      .nav button:hover {
        background-color: #007bff;
      }
      .tool-container {
        display: none;
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      .tool-container.active {
        display: block;
      }
      /* –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä */
      .moneyPerMonth-container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      body.dark .moneyPerMonth-container {
        background-color: #2d2d2d;
      }
      .moneyPerMonth-form {
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
        width: 100%;
      }
      #paymentsContainer {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .moneyPerMonth-h1,
      .moneyPerMonth-h3 {
        text-align: center;
        color: inherit;
      }
      .moneyPerMonth-btn-theme {
        display: block;
        margin: 10px auto 20px auto;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }
      .moneyPerMonth-form label {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
      }
      .payment-entry {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 10px;
      }
      #allMyMoney,
      #nextPayDate,
      .payment-entry input[type='text'],
      .payment-entry input[type='number'] {
        flex: 1;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      .payment-entry button {
        background-color: #dc3545;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        padding: 8px 12px;
      }
      .add-payment-btn {
        background-color: #6a06a7;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        padding: 10px;
        width: 100%;
        margin-bottom: 20px;
      }
      .calculate-btn {
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        padding: 10px;
        width: 100%;
        margin-bottom: 20px;
      }
      #moneyPerMonthResult {
        margin-top: 30px;
        padding: 20px;
        background-color: #e9f7ef;
        border-left: 5px solid #28a745;
        color: #155724;
        display: none;
      }
      #expensesChart {
        width: 100%;
        height: 200px;
      }
      body.dark #moneyPerMonthResult {
        background-color: #3c3c3c;
        border-left-color: #4caf50;
        color: #ddd;
      }
      canvas {
        margin-top: 20px;
      }

      /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
      .card-container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 10px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .card {
        display: flex;
        flex-direction: column;
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 10px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      body.dark .card-container {
        background-color: #2d2d2d;
      }
      body.dark .card {
        background-color: #2d2d2d;
      }
      #productsContainer {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
      .input-group {
        margin-bottom: 10px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: stretch;
      }
      .input-group label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
      }
      .input-group input,
      .input-group select {
        /* width: 100%; */
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
      }
      .btn-group {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }
      .btn-group button {
        flex: 1;
        padding: 10px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        color: white;
      }
      .add-btn {
        background: #6a06a7;
        color: #212121;
      }
      .submit-btn {
        background: #28a745;
      }
      .back-btn {
        background: #007bff;
      }
      .delete-btn {
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        line-height: 1;
        font-weight: bold;
        cursor: pointer;
        float: right;
        align-self: flex-end;
      }
      .result-container {
        background: #e8f5e9;
        border-left: 4px solid #2e7d32;
        padding: 15px;
        margin-top: 20px;
        border-radius: 5px;
      }
      body.dark .result-container {
        background: #3c3c3c;
        color: #f1f1f1;
      }
      @media (max-width: 480px) {
        .payment-entry button {
          order: 1;
        }
        .payment-entry input[type='number'] {
          order: 2;
        }
        .payment-entry input[type='text'] {
          order: 0;
        }
        .nav div {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="nav">
      <div>
        <button id="navMoneyPerMonth" class="active">
          –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤
        </button>
        <button id="navProductCompare">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</button>
        <button id="navFuelCompare">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ê–ó–°</button>
      </div>
      <div>
        <button id="themeToggle" class="moneyPerMonth-btn-theme">üåì</button>

        <button id="languageToggle" class="moneyPerMonth-btn-theme">üåê</button>
      </div>
    </div>

    <div id="moneyPerMonthTool" class="tool-container active">
      <div class="moneyPerMonth-container">
        <h1 class="moneyPerMonth-h1">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤</h1>

        <form id="financeForm" class="moneyPerMonth-form">
          <label id="allMyMoneyLabel"
            >–í—Å–µ –¥–µ–Ω—å–≥–∏ –Ω–∞ —Å—á–µ—Ç–µ:
            <input type="number" step="0.01" id="allMyMoney" value="0" />
          </label>
          <h3 id="paymentsTitle" class="moneyPerMonth-h3">
            –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏:
          </h3>
          <div id="paymentsContainer">
            <!-- –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª—è -->
          </div>
          <button type="button" class="add-payment-btn" id="addPaymentBtn">
            + –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂
          </button>
          <label id="nextDate"
            >–î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è:
            <input type="date" id="nextPayDate" />
          </label>
          <button type="submit" class="calculate-btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </form>
        <div id="moneyPerMonthResult"></div>
        <canvas id="expensesChart"></canvas>
      </div>
    </div>

    <div id="productTool" class="tool-container">
      <div class="card-container">
        <h2>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <form id="productForm">
          <div id="productsContainer"></div>
          <div class="btn-group">
            <button type="button" class="add-btn" id="addProductBtn">
              + –¢–æ–≤–∞—Ä
            </button>
            <button id="productCompareBtn" type="submit" class="submit-btn">
              –°—Ä–∞–≤–Ω–∏—Ç—å
            </button>
          </div>
        </form>
        <div
          class="result-container"
          id="productResult"
          style="display: none"
        ></div>
      </div>
    </div>

    <div id="fuelTool" class="tool-container">
      <div class="card-container">
        <h2>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ê–ó–°</h2>
        <form id="fuelForm">
          <div id="stationsContainer"></div>
          <div class="btn-group">
            <button type="button" class="add-btn" id="addStationBtn">
              + –ê–ó–°
            </button>
            <button id="fuelCompareBtn" type="submit" class="submit-btn">
              –°—Ä–∞–≤–Ω–∏—Ç—å
            </button>
          </div>
        </form>
        <div
          class="result-container"
          id="fuelResult"
          style="display: none"
        ></div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-elements">
      <a
      href="https://etherscan.io/address/0x2cC359a7f7e2a21047Ab3D6e20a6ECEF89D6E80d"
      target="_blank"
    >
      <button style="background-color: #6a06a7">donate ETH</button>
    </a>
      <p>¬© <script>document.write(new Date().getFullYear())</script> Spend-O-Meter</p>
    </div>
    </footer>

    <script>
      // --- –Ø–∑—ã–∫–∏ ---
      const languages = {
        ru: {
          navMoney: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤',
          allMyMoneyLabel: '–í—Å–µ –¥–µ–Ω—å–≥–∏ –Ω–∞ —Å—á–µ—Ç–µ',
          paymentsTitle: '–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏',
          navProduct: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤',
          navFuel: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ê–ó–°',
          addPayment: '+ –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂',
          resultTitle: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã',
          moneyTitle: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤',
          allMoney: '–í—Å–µ –¥–µ–Ω—å–≥–∏ –Ω–∞ —Å—á–µ—Ç–µ',
          nextDate: '–î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è',
          submitCalc: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
          comparisonProduct: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤',
          comparisonFuel: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ê–ó–°',
          addStationBtn: '+ –ê–ó–°',
          addProductBtn: '+ –¢–æ–≤–∞—Ä',
          fuelCompareBtn: '–°—Ä–∞–≤–Ω–∏—Ç—å',
          productCompareBtn: '–°—Ä–∞–≤–Ω–∏—Ç—å',
          paymentField: {
            namePlaceholder: '–ù–∞–∑–≤–∞–Ω–∏–µ',
            amountPlaceholder: '–°—É–º–º–∞',
            deleteTitle: '–£–¥–∞–ª–∏—Ç—å –ø–ª–∞—Ç–µ–∂',
          },
          productField: {
            nameLabel: '–ù–∞–∑–≤–∞–Ω–∏–µ',
            namePlaceholder: '–ù–∞–∑–≤–∞–Ω–∏–µ',
            priceLabel: '–¶–µ–Ω–∞ (‚ÇΩ)',
            weightLabel: '–í–µ—Å/–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ',
          },
          stationField: {
            typeLabel: '–ù–∞–∑–≤–∞–Ω–∏–µ –ê–ó–°',
            priceLabel: '–¶–µ–Ω–∞ –∑–∞ –ª–∏—Ç—Ä (‚ÇΩ)',
            discountLabel: '–¢–∏–ø —Å–∫–∏–¥–∫–∏',
            cashbackLabel: '–ü—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞',
            fixedLabel: '–°–∫–∏–¥–∫–∞ –≤ ‚ÇΩ',
            options: ['–ê–ò-92', '–ê–ò-95', '–ê–ò-98', '–î–¢'],
            discounts: {
              none: '–ù–µ—Ç',
              cashback: '–ö—ç—à–±—ç–∫ (%)',
              fixed: '–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (‚ÇΩ)',
            },
            alerts: {
              notEnoughProducts: '–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º –¥–≤–∞ —Ç–æ–≤–∞—Ä–∞.',
              notEnoughStations: '–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º –¥–≤–µ –ê–ó–°.',
            },
            chart: {
              label: '–†–∞—Å—Ö–æ–¥—ã', // en: Expenses
              unnamed: '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è', // en: Untitled
            },
            result: {
              better: '–í—ã–≥–æ–¥–Ω–µ–µ',
              moreExpensive: '–¥–æ—Ä–æ–∂–µ –Ω–∞',
              perUnit: '‚ÇΩ/–µ–¥.',
              perLiter: '‚ÇΩ/–ª',
            },
          },
          financeResult: {
            totalMoney: '–ù–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –≤—Å–µ –¥–µ–Ω—å–≥–∏',
            totalPayments: '–û–±—â–∞—è —Å—É–º–º–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π',
            needReturn: '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å—á—ë—Ç',
            freeMoney: '–°–≤–æ–±–æ–¥–Ω—ã—Ö –¥–µ–Ω–µ–≥',
            dailySpend: '–ú–æ–∂–Ω–æ —Ç—Ä–∞—Ç–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ',
            daysLeft: '–¥–Ω.',
            untilDate: '–¥–æ',
          },
        },
        en: {
          navMoney: 'Finance Calculator',
          allMyMoneyLabel: 'All money on account',
          paymentsTitle: 'Required payments',
          navProduct: 'Product Comparison',
          navFuel: 'Gas Station Comparison',
          addPayment: '+ Add Payment',
          resultTitle: 'Results',
          moneyTitle: 'Finance Calculator',
          allMoney: 'Total money in account',
          nextDate: 'Next income date',
          submitCalc: 'Calculate',
          comparisonProduct: 'Product Comparison',
          comparisonFuel: 'Fuel Station Comparison',
          addStationBtn: '+ Station',
          addProductBtn: '+ Product',
          fuelCompareBtn: 'Compare',
          productCompareBtn: 'Compare',
          paymentField: {
            namePlaceholder: 'Name',
            amountPlaceholder: 'Amount',
            deleteTitle: 'Delete payment',
          },
          productField: {
            nameLabel: 'Name',
            namePlaceholder: 'Name',
            priceLabel: 'Price',
            weightLabel: 'Weight/Quantity',
          },
          stationField: {
            typeLabel: 'Gas station name',
            priceLabel: 'Price per liter',
            discountLabel: 'Discount type',
            cashbackLabel: 'Cashback percentage',
            fixedLabel: 'Money',
            options: ['AI-92', 'AI-95', 'AI-98', 'DT'],
            discounts: {
              none: 'None',
              cashback: 'Cashback (%)',
              fixed: 'Fixed',
            },
          },
          alerts: {
            notEnoughProducts: 'Add at least two products.',
            notEnoughStations: 'Add at least two gas stations.',
          },
          chart: {
            label: 'Expenses',
            unnamed: 'Untitled',
          },
          result: {
            better: 'Better',
            moreExpensive: 'more expensive by',
            perUnit: 'money/unit',
            perLiter: 'money/liter',
          },
          financeResult: {
            totalMoney: 'Total money on account',
            totalPayments: 'Total payments',
            needReturn: 'Need to return to account',
            freeMoney: 'Free money',
            dailySpend: 'Daily spend',
            daysLeft: 'days left',
            untilDate: 'until',
          },
        },
      };

      function applyLanguage(lang) {
        const l = languages[lang];

        document.getElementById('navMoneyPerMonth').textContent = l.navMoney;
        document.getElementById('navProductCompare').textContent = l.navProduct;
        document.getElementById('navFuelCompare').textContent = l.navFuel;
        document.querySelector('.moneyPerMonth-h1').textContent = l.moneyTitle;
        const label = document.getElementById('allMyMoneyLabel');
        if (label && label.childNodes[0]) {
          label.childNodes[0].nodeValue = `${l.allMyMoneyLabel}: `;
        }
        const label2 = document.getElementById('nextDate');
        if (label2 && label2.childNodes[0]) {
          label2.childNodes[0].nodeValue = `${l.nextDate}: `;
        }
        document.getElementById('addPaymentBtn').textContent = l.addPayment;
        document.querySelector(
          "#financeForm button[type='submit']"
        ).textContent = l.submitCalc;
        document.getElementById('paymentsTitle').textContent = l.paymentsTitle;
        document.querySelector('#productTool h2').textContent =
          l.comparisonProduct;
        document.querySelector('#fuelTool h2').textContent = l.comparisonFuel;

        document.getElementById('addStationBtn').textContent = l.addStationBtn;
        document.getElementById('addProductBtn').textContent = l.addProductBtn;
        document.getElementById('fuelCompareBtn').textContent =
          l.fuelCompareBtn;
        document.getElementById('productCompareBtn').textContent =
          l.productCompareBtn;
      }

      const currentLang = localStorage.getItem('appLang') || 'ru';
      applyLanguage(currentLang);

      document.getElementById('languageToggle').onclick = () => {
        const newLang = currentLang === 'ru' ? 'en' : 'ru';
        localStorage.setItem('appLang', newLang);
        location.reload(); // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –≤—Å–µ–≥–æ UI
      };

      // --- –¢–µ–º—ã ---
      const currentTheme = localStorage.getItem('appTheme') || 'light';
      document.body.classList.add(currentTheme);
      if (currentTheme === 'dark') document.body.classList.remove('light');

      // --- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ ---
      const navMoney = document.getElementById('navMoneyPerMonth');
      const moneyTool = document.getElementById('moneyPerMonthTool');

      const navProduct = document.getElementById('navProductCompare');
      const navFuel = document.getElementById('navFuelCompare');
      const productTool = document.getElementById('productTool');
      const fuelTool = document.getElementById('fuelTool');

      function showTool(name) {
        document
          .querySelectorAll('.tool-container')
          .forEach(div => div.classList.remove('active'));
        document
          .querySelectorAll('.nav button')
          .forEach(btn => btn.classList.remove('active'));

        if (name === 'money') {
          moneyTool.classList.add('active');
          navMoney.classList.add('active');
        } else if (name === 'product') {
          productTool.classList.add('active');
          navProduct.classList.add('active');
        } else if (name === 'fuel') {
          fuelTool.classList.add('active');
          navFuel.classList.add('active');
        }
      }

      navMoney.onclick = () => showTool('money');
      navProduct.onclick = () => showTool('product');
      navFuel.onclick = () => showTool('fuel');

      // --- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ---
      const paymentsContainer = document.getElementById('paymentsContainer');
      const addPaymentBtn = document.getElementById('addPaymentBtn');
      const financeForm = document.getElementById('financeForm');
      const resultDiv = document.getElementById('moneyPerMonthResult');
      const ctx = document.getElementById('expensesChart').getContext('2d');
      const themeToggle = document.getElementById('themeToggle');
      let chart;
      let paymentId = 0;

      const initialPayments = [
        { name: '', amount: 0 },
        { name: '', amount: 0 },
        { name: '', amount: 0 },
      ];

      function createPaymentField(name = '', amount = '') {
        const lang = localStorage.getItem('appLang') || 'ru';
        const t = languages[lang].paymentField;

        paymentId++;
        const div = document.createElement('div');
        div.className = 'payment-entry';
        div.dataset.id = paymentId;

        div.innerHTML = `
    <input type="text" placeholder="${t.namePlaceholder}" value="${name}" required>
    <input type="number" step="0.01" placeholder="${t.amountPlaceholder}" value="${amount}" required>
    <button type="button" title="${t.deleteTitle}">‚àí</button>
  `;

        div
          .querySelector('button')
          .addEventListener('click', () => div.remove());
        paymentsContainer.appendChild(div);
      }

      addPaymentBtn.onclick = () => createPaymentField();
      // initialPayments.forEach(p => createPaymentField(p.name, p.amount));

      themeToggle.onclick = () => {
        document.body.classList.toggle('light');
        document.body.classList.toggle('dark');
        const theme = document.body.classList.contains('dark')
          ? 'dark'
          : 'light';
        localStorage.setItem('appTheme', theme);
        if (chart) chart.destroy();
        financeForm.dispatchEvent(new Event('submit'));
      };

      financeForm.onsubmit = e => {
        e.preventDefault();
        const lang = localStorage.getItem('appLang') || 'ru';
        const lChart = languages[lang]?.chart || {
          label: lang === 'ru' ? '–†–∞—Å—Ö–æ–¥—ã' : 'Expenses',
          unnamed: lang === 'ru' ? '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' : 'Untitled',
        };

        const allMoney =
          parseInt(document.getElementById('allMyMoney').value) || 0;
        const nextPayDate = new Date(
          document.getElementById('nextPayDate').value ||
            new Date().setMonth(new Date().getMonth() + 1)
        );
        const today = new Date();
        const daysLeft = Math.max(
          1,
          Math.ceil((nextPayDate - today) / (1000 * 60 * 60 * 24))
        );

        const payments = [...paymentsContainer.children].map(div => {
          return {
            name: div.querySelector("input[type='text']").value.trim(),
            value:
              parseInt(div.querySelector("input[type='number']").value) || 0,
          };
        });

        const total = payments.reduce((sum, p) => sum + p.value, 0);
        const free = allMoney - total;
        const perDay = free > 0 ? Math.floor(free / daysLeft) : 0;

        const t = languages[currentLang].financeResult;
        let html = `<p>${t.totalMoney}: <strong>${allMoney}</strong></p>
      <p>${t.totalPayments}: <strong>${total}</strong></p>`;
        html +=
          free < 0
            ? `<p style="color:red;">${
                t.needReturn
              }: <strong>${-free}</strong></p>`
            : `<p>${t.freeMoney}: <strong>${free}</strong></p>
         <p>${t.dailySpend}: <strong>${perDay}</strong> (${
                t.untilDate
              } ${nextPayDate.toLocaleDateString(
                currentLang === 'ru' ? 'ru-RU' : 'en-US'
              )}, ${daysLeft} ${t.daysLeft})</p>`;

        resultDiv.innerHTML = html;
        resultDiv.style.display = 'block';

        localStorage.setItem(
          'financeData',
          JSON.stringify({
            allMoney,
            nextPayDate: document.getElementById('nextPayDate').value,
            payments,
          })
        );

        if (chart) chart.destroy();
        chart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: payments.map(p => p.name || lChart.unnamed),
            datasets: [
              {
                label: lChart.label,
                data: payments.map(p => p.value),
                backgroundColor: document.body.classList.contains('dark')
                  ? '#0056b3'
                  : '#007bff',
              },
            ],
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  color: document.body.classList.contains('dark')
                    ? '#f1f1f1'
                    : '#333',
                },
              },
              x: {
                ticks: {
                  color: document.body.classList.contains('dark')
                    ? '#f1f1f1'
                    : '#333',
                },
              },
            },
            plugins: {
              legend: {
                labels: {
                  color: document.body.classList.contains('dark')
                    ? '#f1f1f1'
                    : '#333',
                },
              },
            },
          },
        });
      };

      window.addEventListener('DOMContentLoaded', () => {
        const saved = JSON.parse(localStorage.getItem('financeData') || '{}');

        if (saved.allMoney !== undefined) {
          document.getElementById('allMyMoney').value = saved.allMoney;
        }
        if (saved.nextPayDate) {
          document.getElementById('nextPayDate').value = saved.nextPayDate;
        }
        if (Array.isArray(saved.payments)) {
          paymentsContainer.innerHTML = '';
          saved.payments.forEach(p => createPaymentField(p.name, p.value));
        } else {
          initialPayments.forEach(p => createPaymentField(p.name, p.amount));
        }

        financeForm.dispatchEvent(new Event('submit'));
      });

      // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
      let productId = 0;
      const productForm = document.getElementById('productForm');
      const addProductBtn = document.getElementById('addProductBtn');
      const productsContainer = document.getElementById('productsContainer');
      const productResult = document.getElementById('productResult');

      function addProduct(name = '', price = '', weight = '') {
        const lang = localStorage.getItem('appLang') || 'ru';
        const t = languages[lang].productField;

        productId++;
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `
    <button type="button" class="delete-btn" title="√ó">√ó</button>
    <div class="input-group">
      <label>${t.nameLabel}</label>
      <input type="text" value="${name}" placeholder="${t.namePlaceholder}">
    </div>
    <div class="input-group">
      <label>${t.priceLabel}</label>
      <input type="number" step="0.01"  value="${price}" placeholder="0.00" required>
    </div>
    <div class="input-group">
      <label>${t.weightLabel}</label>
      <input type="number" step="0.01"  value="${weight}" placeholder="0.00" required>
    </div>
  `;
        div.querySelector('.delete-btn').onclick = () => div.remove();
        productsContainer.appendChild(div);
      }

      addProductBtn.onclick = () => addProduct();
      addProduct('', 0, 0);

      productForm.onsubmit = e => {
        e.preventDefault();
        const products = [...productsContainer.children]
          .map(div => {
            const inputs = div.querySelectorAll('input');
            return {
              name: inputs[0].value || '',
              price: parseFloat(inputs[1].value),
              weight: parseFloat(inputs[2].value),
            };
          })
          .filter(p => p.price > 0 && p.weight > 0);

        if (products.length < 2) {
          productResult.style.display = 'none';
          return alert(languages[currentLang].alerts.notEnoughProducts);
        }

        products.sort((a, b) => a.price / a.weight - b.price / b.weight);
        const best = products[0];
        const lang = localStorage.getItem('appLang') || 'ru';
        const l = languages[lang]?.result || {
          better: '–í—ã–≥–æ–¥–Ω–µ–µ',
          moreExpensive: '–¥–æ—Ä–æ–∂–µ –Ω–∞',
          perUnit: '‚ÇΩ/–µ–¥.',
        };

        let result = `${l.better}: <strong>${best.name}</strong> (${(
          best.price / best.weight
        ).toFixed(2)} ${l.perUnit})<br><br>`;

        for (let i = 1; i < products.length; i++) {
          const diff =
            (products[i].price /
              products[i].weight /
              (best.price / best.weight) -
              1) *
            100;
          result += `${products[i].name}: ${l.moreExpensive} ${diff.toFixed(
            1
          )}%<br>`;
        }

        productResult.innerHTML = result;
        productResult.style.display = 'block';
      };

      // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ê–ó–°
      let stationId = 0;
      const fuelForm = document.getElementById('fuelForm');
      const addStationBtn = document.getElementById('addStationBtn');
      const stationsContainer = document.getElementById('stationsContainer');
      const fuelResult = document.getElementById('fuelResult');

      function addStation(name = '', price = '', discountType = 'none', cashback = '', fixed = '') {
  const lang = localStorage.getItem('appLang') || 'ru';
  const t = languages[lang]?.stationField || {
    typeLabel: "–ù–∞–∑–≤–∞–Ω–∏–µ –ê–ó–°",
    priceLabel: "–¶–µ–Ω–∞ –∑–∞ –ª–∏—Ç—Ä (‚ÇΩ)",
    discountLabel: "–¢–∏–ø —Å–∫–∏–¥–∫–∏",
    cashbackLabel: "–ü—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞",
    fixedLabel: "–°–∫–∏–¥–∫–∞ –≤ ‚ÇΩ",
    discounts: {
      none: "–ù–µ—Ç",
      cashback: "–ö—ç—à–±—ç–∫ (%)",
      fixed: "–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (‚ÇΩ)"
    }
  };

  stationId++;
  const div = document.createElement('div');
  div.className = 'card';
  div.dataset.id = stationId;

  div.innerHTML = `
    <button type="button" class="delete-btn">√ó</button>
    <div class="input-group">
      <label>${t.typeLabel}</label>
      <input type="text" class="fuel-name" placeholder="${t.typeLabel}" value="${name}" required>
    </div>
    <div class="input-group">
      <label>${t.priceLabel}</label>
      <input type="number" step="0.01" class="fuel-price" value="${price}" required>
    </div>
    <div class="input-group">
      <label>${t.discountLabel}</label>
      <select class="discount-select">
        <option value="none"${discountType === 'none' ? ' selected' : ''}>${t.discounts.none}</option>
        <option value="cashback"${discountType === 'cashback' ? ' selected' : ''}>${t.discounts.cashback}</option>
        <option value="fixed"${discountType === 'fixed' ? ' selected' : ''}>${t.discounts.fixed}</option>
      </select>
    </div>
    <div class="input-group cashback-group" style="display: none;">
      <label>${t.cashbackLabel}</label>
      <input type="number" step="0.01" class="cashback-value" value="${cashback}">
    </div>
    <div class="input-group fixed-group" style="display: none;">
      <label>${t.fixedLabel}</label>
      <input type="number" step="0.01" class="fixed-value" value="${fixed}">
    </div>
  `;

  const discountSelect = div.querySelector('.discount-select');
  const cashbackGroup = div.querySelector('.cashback-group');
  const fixedGroup = div.querySelector('.fixed-group');

  function toggleDiscountFields() {
    const type = discountSelect.value;
    cashbackGroup.style.display = type === 'cashback' ? 'block' : 'none';
    fixedGroup.style.display = type === 'fixed' ? 'block' : 'none';
  }

  toggleDiscountFields();
  discountSelect.onchange = toggleDiscountFields;

  div.querySelector('.delete-btn').onclick = () => div.remove();
  stationsContainer.appendChild(div);
}


      addStationBtn.onclick = () => addStation();
      addStation('Teboil', 0, 'cashback', 0);

      fuelForm.onsubmit = e => {
        e.preventDefault();
        const stations = [...stationsContainer.children]
          .map(div => {
            const name = div.querySelector('.fuel-name').value.trim();
            const discountType = div.querySelector('.discount-select').value;
            const price = parseFloat(div.querySelector('.fuel-price').value); // —É–∂–µ –µ—Å—Ç—å
            const cashback =
              parseFloat(div.querySelector('.cashback-value')?.value) || 0;
            const fixed =
              parseFloat(div.querySelector('.fixed-value')?.value) || 0;
            let finalPrice = price;
            if (discountType === 'cashback')
              finalPrice = price * (1 - cashback / 100);
            else if (discountType === 'fixed') finalPrice = price - fixed;

            return { name, price, finalPrice, discountType, cashback, fixed };
          })
          .filter(s => s.price > 0);

        if (stations.length < 2) {
          fuelResult.style.display = 'none';
          return alert(languages[currentLang].alerts.notEnoughStations);
        }

        stations.sort((a, b) => a.finalPrice - b.finalPrice);
        const best = stations[0];
        const lang = localStorage.getItem('appLang') || 'ru';
        const l = languages[lang]?.result || {
          better: '–í—ã–≥–æ–¥–Ω–µ–µ',
          moreExpensive: '–¥–æ—Ä–æ–∂–µ –Ω–∞',
          perLiter: '‚ÇΩ/–ª',
        };

        let result = `${l.better}: <strong>${
          best.name
        }</strong> (${best.finalPrice.toFixed(2)} ${l.perLiter})<br><br>`;

        for (let i = 1; i < stations.length; i++) {
          const diff = (stations[i].finalPrice / best.finalPrice - 1) * 100;
          result += `${stations[i].name}: ${l.moreExpensive} ${diff.toFixed(
            1
          )}%<br>`;
        }

        fuelResult.innerHTML = result;
        fuelResult.style.display = 'block';
      };
    </script>
  </body>
</html>
